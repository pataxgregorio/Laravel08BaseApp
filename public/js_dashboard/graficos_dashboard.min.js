
// First AJAX request
jQuery.ajax({
  url: "/solicitud/solicitudTipo",
  type: 'GET',
  error: function() {
    // Handle error if needed
  },
  dataType: 'json',
  success: function(data) {
    var array_NAME_USER = [];
    var array_TOTAL_NOTIFICATIONS = [];    
    jQuery.each(data, function(index, value) {      
      array_NAME_USER.push(value.SOLICITUD_NOMBRE);
      array_TOTAL_NOTIFICATIONS.push(value.TOTAL_SOLICITUD);      
    });    
    var ctx = document.getElementById('solicitudTipo').getContext('2d');
    var solicitudTipo = new Chart(ctx, {
      type: 'pie', // Change the type to 'pie'
      data: {
        labels: array_NAME_USER,
        datasets: [{
          label: ' Medidores por tipo de Gestiones y Solicitudes de Atención al Ciudadano ',
          data: array_TOTAL_NOTIFICATIONS,
          backgroundColor: [ // Include appropriate colors for the pie chart
            'rgba(255, 87, 51, 1)',
            'rgba(52, 152, 219, 1)',
            'rgba(46, 204, 113, 1)',
            'rgba(241, 196, 15, 1)',
            'rgba(155, 89, 182, 1)',
            'rgba(33, 162, 49, 0.8)',
            // Add more colors as needed
          ],
          borderColor: [ // Include corresponding border colors
            'rgba(255, 87, 51, 1)',
            'rgba(52, 152, 219, 1)',
            'rgba(46, 204, 113, 1)',
            'rgba(241, 196, 15, 1)',
            'rgba(155, 89, 182, 1)',
            'rgba(33, 162, 49, 0.8)',
            // Add more colors as needed
          ],
          borderWidth: 1
        }]
      },
      options: {
        // No need for 'yAxes' configuration in pie charts
      }
    });
  },
});

jQuery.ajax({
  url: "/solicitud/solicitudTotalTipo",
  type: 'GET',
  error: function() {
  },
  dataType: 'json',
  success: function(data) {
    var array_NAME_USER = [];
    var array_TOTAL_NOTIFICATIONS = [];    
    jQuery.each(data, function(index, value) {      
      array_NAME_USER.push(value.SOLICITUD_NOMBRE);
      array_TOTAL_NOTIFICATIONS.push(value.TOTAL_SOLICITUD);      
    });    
    var ctx = document.getElementById('solicitudTotalTipo').getContext('2d');
    var solicitudTipo = new Chart(ctx, {
      type: 'bar',
      data: {
        labels: array_NAME_USER,
        datasets: [{
          label: 'Indicadores de la Evolución de los Casos Atendidos',
          data: array_TOTAL_NOTIFICATIONS,
          backgroundColor: [
            'rgba(255, 87, 51, 1)',
            'rgba(52, 152, 219, 1)',
            'rgba(46, 204, 113, 1)',
            'rgba(241, 196, 15, 1)',
            'rgba(155, 89, 182, 1)',
            'rgba(33, 162, 49, 0.8)',
          ],
          borderColor: [
            'rgba(255, 87, 51, 1)',
            'rgba(52, 152, 219, 1)',
            'rgba(46, 204, 113, 1)',
            'rgba(241, 196, 15, 1)',
            'rgba(155, 89, 182, 1)',
            'rgba(33, 162, 49, 0.8)',
          ],
          borderWidth: 1
        }]
      },
      options: {
        scales: {
          yAxes: [{
            ticks: {
              beginAtZero: true
            }
          }]
        }
      }
    });
  },
});